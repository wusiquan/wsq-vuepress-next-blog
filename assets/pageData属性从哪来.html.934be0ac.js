import{_ as p,r as o,o as t,c,a as n,d as l,b as s,e}from"./app.08d597d0.js";var r="/wsq-vuepress-next-blog/assets/temp_internal_pagesdata.840d3bfe.jpg",i="/wsq-vuepress-next-blog/assets/temp_pages.e31369c0.jpg";const F={},y=n("h1",{id:"pagedata\u5C5E\u6027\u4ECE\u54EA\u6765",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#pagedata\u5C5E\u6027\u4ECE\u54EA\u6765","aria-hidden":"true"},"#"),s(" pageData\u5C5E\u6027\u4ECE\u54EA\u6765")],-1),d=s("\u6211\u5728\u770B@vuepress/theme-default\u4EE3\u7801\u65F6\uFF0C\u770B\u5176\u4F7F\u7528"),v=n("code",null,"usePageData",-1),m=s(", "),u=n("code",null,"usePageFrontmatter",-1),E=s("\u65B9\u6CD5\uFF0C "),b={href:"https://github.com/vuepress/vuepress-next/blob/main/packages/%40vuepress/client/src/composables/pageData.ts",target:"_blank",rel:"noopener noreferrer"},g=s("usePageData\u7684\u4EE3\u7801"),C=s("\uFF0C "),_={href:"https://github.com/vuepress/vuepress-next/blob/main/packages/%40vuepress/client/src/composables/pageFrontmatter.ts",target:"_blank",rel:"noopener noreferrer"},B=s("usePageFrontmatter\u7684\u4EE3\u7801"),h=s(" \u8FD9\u4E24\u4E2A\u65B9\u6CD5\u90FD\u662F"),f=n("code",null,"@vuepress/client",-1),D=s("\u6A21\u5757\u91CC\u7684"),P=e(`<p><code>usePageData</code>\u5176\u4E2D\u90E8\u5206\u4EE3\u7801\u53EF\u4EE5\u770B\u5230\uFF0C\u8FD9\u4E2A\u65B9\u6CD5\u76F4\u63A5\u8FD4\u56DEpageData\u53D8\u91CF\uFF0C\u4E8E\u662F\u60F3\u95EEpageData\u54EA\u91CC\u6765\u7684</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#282A36;"><code><span class="line"><span style="color:#F286C4;">export</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> pageDataEmpty </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">readonly</span><span style="color:#F6F6F4;">({</span></span>
<span class="line"><span style="color:#F6F6F4;">  key</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;&#39;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">  path</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;&#39;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">  title</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;&#39;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">  lang</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;&#39;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">  frontmatter</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> {},</span></span>
<span class="line"><span style="color:#F6F6F4;">  excerpt</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;&#39;</span><span style="color:#F6F6F4;">,</span></span>
<span class="line"><span style="color:#F6F6F4;">  headers</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> [],</span></span>
<span class="line"><span style="color:#F6F6F4;">} </span><span style="color:#F286C4;">as</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">PageData</span><span style="color:#F6F6F4;">) </span><span style="color:#F286C4;">as</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">PageData</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> * Global page data ref</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span></span>
<span class="line"><span style="color:#F286C4;">export</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> pageData</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">PageDataRef</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">ref</span><span style="color:#F6F6F4;">(pageDataEmpty)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> * Returns the ref of the data of current page</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span></span>
<span class="line"><span style="color:#F286C4;">export</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">usePageData</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> &lt;</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#FFB86C;font-style:italic;">T</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">extends</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">Record</span><span style="color:#F6F6F4;">&lt;</span><span style="color:#97E1F1;font-style:italic;">any</span><span style="color:#F6F6F4;">, </span><span style="color:#97E1F1;font-style:italic;">any</span><span style="color:#F6F6F4;">&gt; </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#FFB86C;font-style:italic;">Record</span><span style="color:#F6F6F4;">&lt;</span><span style="color:#97E1F1;font-style:italic;">never</span><span style="color:#F6F6F4;">, </span><span style="color:#97E1F1;font-style:italic;">never</span><span style="color:#F6F6F4;">&gt;</span></span>
<span class="line"><span style="color:#F6F6F4;">&gt;()</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">PageDataRef</span><span style="color:#F6F6F4;">&lt;</span><span style="color:#FFB86C;font-style:italic;">T</span><span style="color:#F6F6F4;">&gt; </span><span style="color:#F286C4;">=&gt;</span><span style="color:#F6F6F4;"> pageData </span><span style="color:#F286C4;">as</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">PageDataRef</span><span style="color:#F6F6F4;">&lt;</span><span style="color:#FFB86C;font-style:italic;">T</span><span style="color:#F6F6F4;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53E6<code>usePageFrontmatter</code>\u53EF\u4EE5\u770B\u5230\u4F7F\u7528<code>inject(pageFrontmatterSymbol)</code>\uFF0C\u800Cprovide\u7684\u5730\u65B9\u662F\u5728@vuepress/client/src/setupGlobalCompueted\u4E2D</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#282A36;"><code><span class="line"><span style="color:#7B7F8B;">// @vuepress/client/src/setupGlobalCompueted.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">// ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> pageFrontmatter </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">computed</span><span style="color:#F6F6F4;">(() </span><span style="color:#F286C4;">=&gt;</span></span>
<span class="line"><span style="color:#F6F6F4;">  resolvers.</span><span style="color:#62E884;">resolvePageFrontmatter</span><span style="color:#F6F6F4;">(pageData.value)</span></span>
<span class="line"><span style="color:#F6F6F4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">// ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">app.</span><span style="color:#62E884;">provide</span><span style="color:#F6F6F4;">(pageFrontmatterSymbol, pageFrontmatter)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">// ...</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),k=s("\u800C"),x={href:"https://github.com/vuepress/vuepress-next/blob/main/packages/%40vuepress/client/src/resolvers.ts",target:"_blank",rel:"noopener noreferrer"},R=s("resolves"),A=s("\u7684resolvePageFrontmatter\u65B9\u6CD5\uFF0C \u4E8E\u662F\u56DE\u5230pageData\u54EA\u91CC\u6765\u7684\u95EE\u9898"),w=e(`<div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#282A36;"><code><span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> * Resolve page frontmatter from page data</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span></span>
<span class="line"><span style="color:#F6F6F4;">resolvePageFrontmatter: (</span><span style="color:#FFB86C;font-style:italic;">pageData</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">PageData</span><span style="color:#F6F6F4;">)</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">PageFrontmatter</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=&gt;</span><span style="color:#F6F6F4;"> pageData.frontmatter</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728@vuepress/core\u7684appInit\u4E2D\uFF0C\u53EF\u4EE5\u770B\u5230app.pages\u4ECE\u54EA\u6765</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#282A36;"><code><span class="line"><span style="color:#7B7F8B;">// @vuepress/core/src/app/appInit.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">// create pages</span></span>
<span class="line"><span style="color:#F6F6F4;">app.pages </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">await</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">resolveAppPages</span><span style="color:#F6F6F4;">(app)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),N={href:"https://github.com/vuepress/vuepress-next/blob/main/packages/%40vuepress/core/src/app/resolveAppPages.ts",target:"_blank",rel:"noopener noreferrer"},M=s("resolveAppPages\u4EE3\u7801"),T=e(`<p>\u5B83\u4F1A\u8C03\u7528createPage\u65B9\u6CD5</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#282A36;"><code><span class="line"><span style="color:#7B7F8B;">// @vuepress/core/src/page/createPage.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">// plugin hook: extendsPageOptions</span></span>
<span class="line"><span style="color:#F286C4;">await</span><span style="color:#F6F6F4;"> app.pluginApi.hooks.extendsPageOptions.</span><span style="color:#62E884;">process</span><span style="color:#F6F6F4;">(options, app)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">// ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> { dataFilePath, dataFilePathRelative, dataFileChunkName } </span><span style="color:#F286C4;">=</span></span>
<span class="line"><span style="color:#F6F6F4;">    </span><span style="color:#62E884;">resolvePageDataInfo</span><span style="color:#F6F6F4;">({ app, htmlFilePathRelative, key })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> page</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Page</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#7B7F8B;">// page data</span></span>
<span class="line"><span style="color:#F6F6F4;">  data</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">    key,</span></span>
<span class="line"><span style="color:#F6F6F4;">    path,</span></span>
<span class="line"><span style="color:#F6F6F4;">    title,</span></span>
<span class="line"><span style="color:#F6F6F4;">    lang,</span></span>
<span class="line"><span style="color:#F6F6F4;">    frontmatter,</span></span>
<span class="line"><span style="color:#F6F6F4;">    excerpt,</span></span>
<span class="line"><span style="color:#F6F6F4;">    headers,</span></span>
<span class="line"><span style="color:#F6F6F4;">  },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#7B7F8B;">// ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#7B7F8B;">// file info</span></span>
<span class="line"><span style="color:#F6F6F4;">  dataFilePath,</span></span>
<span class="line"><span style="color:#F6F6F4;">  dataFilePathRelative,</span></span>
<span class="line"><span style="color:#F6F6F4;">  dataFileChunkName,</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#7B7F8B;">// ...</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">// plugin hook: extendsPage</span></span>
<span class="line"><span style="color:#F286C4;">await</span><span style="color:#F6F6F4;"> app.pluginApi.hooks.extendsPage.</span><span style="color:#62E884;">process</span><span style="color:#F6F6F4;">(page, app)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F286C4;">return</span><span style="color:#F6F6F4;"> page</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728@vuepress/core\u7684preparePagesData\u548CpreparePageData\u4E2D\uFF0C\u53EF\u4EE5\u770B\u5230\u4ED6\u4EEC\u662F\u5982\u4F55\u751F\u6210\u6587\u4EF6</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#282A36;"><code><span class="line"><span style="color:#7B7F8B;">// @vuepress/core/src/app/prepare/preparePagesData.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F286C4;">import</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">type</span><span style="color:#F6F6F4;"> { App } </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">../../types</span><span style="color:#DEE492;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> * Generate page key to page component map temp file</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span></span>
<span class="line"><span style="color:#F286C4;">export</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">preparePagesComponents</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">async</span><span style="color:#F6F6F4;"> (</span><span style="color:#FFB86C;font-style:italic;">app</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">App</span><span style="color:#F6F6F4;">)</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Promise</span><span style="color:#F6F6F4;">&lt;</span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;">&gt; </span><span style="color:#F286C4;">=&gt;</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#7B7F8B;">// generate page component map file</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> content </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">\`</span><span style="color:#F286C4;">\\</span></span>
<span class="line"><span style="color:#E7EE98;">import { defineAsyncComponent } from &#39;vue&#39;</span></span>
<span class="line"><span style="color:#E7EE98;">export const pagesComponents = {</span><span style="color:#F286C4;">\\</span></span>
<span class="line"><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">app.pages</span></span>
<span class="line"><span style="color:#E7EE98;">  </span><span style="color:#F6F6F4;">.</span><span style="color:#62E884;">map</span><span style="color:#F6F6F4;">(</span></span>
<span class="line"><span style="color:#E7EE98;">    ({ </span><span style="color:#FFB86C;font-style:italic;">key</span><span style="color:#E7EE98;">, </span><span style="color:#FFB86C;font-style:italic;">path</span><span style="color:#E7EE98;">, </span><span style="color:#FFB86C;font-style:italic;">componentFilePath</span><span style="color:#E7EE98;">, </span><span style="color:#FFB86C;font-style:italic;">componentFileChunkName</span><span style="color:#E7EE98;"> }) </span><span style="color:#F286C4;">=&gt;</span><span style="color:#E7EE98;"> </span><span style="color:#E7EE98;">\`</span></span>
<span class="line"><span style="color:#E7EE98;">  // path: </span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">path</span><span style="color:#F286C4;">}</span></span>
<span class="line"><span style="color:#E7EE98;">  </span><span style="color:#F286C4;">\${</span><span style="color:#BF9EEE;">JSON</span><span style="color:#F6F6F4;">.</span><span style="color:#97E1F1;">stringify</span><span style="color:#F6F6F4;">(key)</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;">: defineAsyncComponent(() =&gt; import(</span><span style="color:#F286C4;">\${</span></span>
<span class="line"><span style="color:#E7EE98;">      </span><span style="color:#F6F6F4;">componentFileChunkName</span></span>
<span class="line"><span style="color:#E7EE98;">        </span><span style="color:#F286C4;">?</span><span style="color:#E7EE98;"> </span><span style="color:#E7EE98;">\`/* webpackChunkName: &quot;</span><span style="color:#F286C4;">\${</span><span style="color:#F6F6F4;">componentFileChunkName</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;">&quot; */\`</span></span>
<span class="line"><span style="color:#E7EE98;">        </span><span style="color:#F286C4;">:</span><span style="color:#E7EE98;"> </span><span style="color:#DEE492;">&#39;&#39;</span></span>
<span class="line"><span style="color:#E7EE98;">    </span><span style="color:#F286C4;">}\${</span><span style="color:#BF9EEE;">JSON</span><span style="color:#F6F6F4;">.</span><span style="color:#97E1F1;">stringify</span><span style="color:#F6F6F4;">(componentFilePath)</span><span style="color:#F286C4;">}</span><span style="color:#E7EE98;">)),\`</span></span>
<span class="line"><span style="color:#E7EE98;">  </span><span style="color:#F6F6F4;">)</span></span>
<span class="line"><span style="color:#E7EE98;">  </span><span style="color:#F6F6F4;">.</span><span style="color:#62E884;">join</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&#39;&#39;</span><span style="color:#F6F6F4;">)</span><span style="color:#F286C4;">}</span></span>
<span class="line"><span style="color:#E7EE98;">}</span></span>
<span class="line"><span style="color:#E7EE98;">\`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">await</span><span style="color:#F6F6F4;"> app.</span><span style="color:#62E884;">writeTemp</span><span style="color:#F6F6F4;">(</span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">internal/pagesComponents.js</span><span style="color:#DEE492;">&#39;</span><span style="color:#F6F6F4;">, content)</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9E\u9645\u622A\u56FE <img src="`+r+`" alt="temp_internal_pagesdata"></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#282A36;"><code><span class="line"><span style="color:#7B7F8B;">// @vuepress/core/src/app/prepare/preparePageData.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F286C4;">import</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">type</span><span style="color:#F6F6F4;"> { App, Page } </span><span style="color:#F286C4;">from</span><span style="color:#F6F6F4;"> </span><span style="color:#DEE492;">&#39;</span><span style="color:#E7EE98;">../../types</span><span style="color:#DEE492;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> HMR_CODE </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">\`</span></span>
<span class="line"><span style="color:#E7EE98;">if (i<wbr>mport.meta.webpackHot) {</span></span>
<span class="line"><span style="color:#E7EE98;">  i<wbr>mport.meta.webpackHot.accept()</span></span>
<span class="line"><span style="color:#E7EE98;">  if (__VUE_HMR_RUNTIME__.updatePageData) {</span></span>
<span class="line"><span style="color:#E7EE98;">    __VUE_HMR_RUNTIME__.updatePageData(data)</span></span>
<span class="line"><span style="color:#E7EE98;">  }</span></span>
<span class="line"><span style="color:#E7EE98;">}</span></span>
<span class="line"><span style="color:#E7EE98;">if (i<wbr>mport.meta.hot) {</span></span>
<span class="line"><span style="color:#E7EE98;">  i<wbr>mport.meta.hot.accept(({ data }) =&gt; {</span></span>
<span class="line"><span style="color:#E7EE98;">    __VUE_HMR_RUNTIME__.updatePageData(data)</span></span>
<span class="line"><span style="color:#E7EE98;">  })</span></span>
<span class="line"><span style="color:#E7EE98;">}</span></span>
<span class="line"><span style="color:#E7EE98;">\`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B7F8B;">/**</span></span>
<span class="line"><span style="color:#7B7F8B;"> * Generate page data temp file of a single page</span></span>
<span class="line"><span style="color:#7B7F8B;"> */</span></span>
<span class="line"><span style="color:#F286C4;">export</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">const</span><span style="color:#F6F6F4;"> </span><span style="color:#62E884;">preparePageData</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#F286C4;">async</span><span style="color:#F6F6F4;"> (</span><span style="color:#FFB86C;font-style:italic;">app</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">App</span><span style="color:#F6F6F4;">, </span><span style="color:#FFB86C;font-style:italic;">page</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Page</span><span style="color:#F6F6F4;">)</span><span style="color:#F286C4;">:</span><span style="color:#F6F6F4;"> </span><span style="color:#97E1F1;font-style:italic;">Promise</span><span style="color:#F6F6F4;">&lt;</span><span style="color:#97E1F1;font-style:italic;">void</span><span style="color:#F6F6F4;">&gt; </span><span style="color:#F286C4;">=&gt;</span><span style="color:#F6F6F4;"> {</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#7B7F8B;">// page data file content</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">let</span><span style="color:#F6F6F4;"> content </span><span style="color:#F286C4;">=</span><span style="color:#F6F6F4;"> </span><span style="color:#E7EE98;">\`export const data = </span><span style="color:#F286C4;">\${</span><span style="color:#BF9EEE;">JSON</span><span style="color:#F6F6F4;">.</span><span style="color:#97E1F1;">stringify</span><span style="color:#F6F6F4;">(page.data</span><span style="color:#E7EE98;">, </span><span style="color:#BF9EEE;">null</span><span style="color:#E7EE98;">, </span><span style="color:#BF9EEE;">2</span><span style="color:#F6F6F4;">)</span><span style="color:#F286C4;">}\\n</span><span style="color:#E7EE98;">\`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#7B7F8B;">// inject HMR code</span></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">if</span><span style="color:#F6F6F4;"> (app.env.isDev) {</span></span>
<span class="line"><span style="color:#F6F6F4;">    content </span><span style="color:#F286C4;">+=</span><span style="color:#F6F6F4;"> HMR_CODE</span></span>
<span class="line"><span style="color:#F6F6F4;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F6F6F4;">  </span><span style="color:#F286C4;">await</span><span style="color:#F6F6F4;"> app.</span><span style="color:#62E884;">writeTemp</span><span style="color:#F6F6F4;">(page.dataFilePathRelative, content)</span></span>
<span class="line"><span style="color:#F6F6F4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9E\u9645\u622A\u56FE <img src="`+i+'" alt="temp_pages"></p>',7);function H(I,O){const a=o("ExternalLinkIcon");return t(),c("div",null,[y,n("p",null,[d,v,m,u,E,n("a",b,[g,l(a)]),C,n("a",_,[B,l(a)]),h,f,D]),P,n("p",null,[k,n("a",x,[R,l(a)]),A]),w,n("p",null,[n("a",N,[M,l(a)])]),T])}var $=p(F,[["render",H],["__file","pageData\u5C5E\u6027\u4ECE\u54EA\u6765.html.vue"]]);export{$ as default};
